("function"==typeof define&&define.amd?define:function(e,n){return n()})(["./kendo.core.min","./kendo.fx.min","./kendo.draganddrop.min"],function(){(function(e){var n=window.kendo,t=n.mobile,i=n.fx,s=t.ui,o=e.proxy,l=e.extend,a=s.Widget,r=n.Class,c=n.ui.Movable,u=n.ui.Pane,m=n.ui.PaneDimensions,d=i.Transition,p=i.Animation,h=Math.abs,f=500,v=.7,b=.93,x=.5,T="km-scroller-release",y="km-scroller-refresh",E="pull",C="change",_="resize",g="scroll",k=p.extend({init:function(e){var n=this;p.fn.init.call(n),l(n,e),n.userEvents.bind("gestureend",o(n.start,n)),n.tapCapture.bind("press",o(n.cancel,n))},done:function(){return.01>this.dimensions.minScale-this.movable.scale},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),w=p.extend({init:function(e){var n=this;p.fn.init.call(n),l(n,e,{transition:new d({axis:e.axis,movable:e.movable,onEnd:function(){n._end()}})}),n.tapCapture.bind("press",function(){n.cancel()}),n.userEvents.bind("end",o(n.start,n)),n.userEvents.bind("gestureend",o(n.start,n)),n.userEvents.bind("tap",o(n.onEnd,n))},onCancel:function(){this.transition.cancel()},freeze:function(e){var n=this;n.cancel(),n._moveTo(e)},onEnd:function(){var e=this;e._outOfBounds()?e._snapBack():e._end()},done:function(){return 1>h(this.velocity)},start:function(e){var n=this;n.dimension.enabled&&(n._outOfBounds()?n._snapBack():(n.velocity=16*e.touch[n.axis].velocity,n.velocity&&(n.tapCapture.captureNext(),p.fn.start.call(n))))},tick:function(){var e=this,n=e.dimension,t=e._outOfBounds()?x:b,i=e.velocity*=t,s=e.movable[e.axis]+i;!e.elastic&&n.outOfBounds(s)&&(s=Math.max(Math.min(s,n.max),n.min),e.velocity=0),e.movable.moveAxis(e.axis,s)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},_snapBack:function(){var e=this,n=e.dimension,t=e.movable[e.axis]>n.max?n.max:n.min;e._moveTo(t)},_moveTo:function(e){this.transition.moveTo({location:e,duration:f,ease:d.easeOutExpo})}}),z=r.extend({init:function(n){var t=this,i="x"===n.axis,s=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');l(t,n,{element:s,elementSize:0,movable:new c(s),scrollMovable:n.movable,size:i?"width":"height"}),t.scrollMovable.bind(C,o(t._move,t)),t.container.append(s)},_move:function(){var e=this,n=e.axis,t=e.dimension,i=t.size,s=e.scrollMovable,o=i/t.total,l=Math.round(-s[n]*o),a=Math.round(i*o);l+a>i?a=i-l:0>l&&(a+=l,l=0),e.elementSize!=a&&(e.element.css(e.size,a+"px"),e.elementSize=a),e.movable.moveAxis(n,l)},show:function(){this.element.css({opacity:v,visibility:"visible"})},hide:function(){this.element.css({opacity:0})}}),O=a.extend({init:function(t,i){var s,o,r,d,p,f,v,b=this;a.fn.init.call(b,t,i),t=b.element,t.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),s=t.children().eq(1),o=new n.TapCapture(t),r=new c(s),d=new m({element:s,container:t,forcedEnabled:b.options.zoom,change:function(){b.trigger(_)}}),p=new n.UserEvents(t,{allowSelection:!0,preventDragEvent:!0,multiTouch:b.options.zoom,start:function(e){d.refresh();var n=h(e.x.velocity),t=h(e.y.velocity);d.x.enabled&&2*n>=t||d.y.enabled&&2*t>=n?p.capture():p.cancel()}}),f=new u({movable:r,dimensions:d,userEvents:p,elastic:b.options.elastic}),v=new k({movable:r,dimensions:d,userEvents:p,tapCapture:o}),r.bind(C,function(){b.scrollTop=-r.y,b.scrollLeft=-r.x,b.trigger(g,{scrollTop:b.scrollTop,scrollLeft:b.scrollLeft})}),l(b,{movable:r,dimensions:d,zoomSnapBack:v,userEvents:p,pane:f,tapCapture:o,pulled:!1,scrollElement:s,fixedContainer:t.children().first()}),b._initAxis("x"),b._initAxis("y"),d.refresh(),b.options.pullToRefresh&&b._initPullToRefresh(),n.onResize(e.proxy(b.reset,b))},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,elastic:!0,pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},events:[E,g,_],setOptions:function(e){var n=this;a.fn.setOptions.call(n,e),e.pullToRefresh&&n._initPullToRefresh()},reset:function(){this.movable.moveTo({x:0,y:0})},scrollTo:function(e,n){this.movable.moveTo({x:e,y:n})},pullHandled:function(){var e=this;e.refreshHint.removeClass(y),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd()},destroy:function(){a.fn.destroy.call(this),this.userEvents.destroy()},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=n.template(e.options.pullTemplate),e.releaseTemplate=n.template(e.options.releaseTemplate),e.refreshTemplate=n.template(e.options.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",o(e._paneChange,e)),e.userEvents.bind("end",o(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(T).addClass(y),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/x>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(y).addClass(T),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(T),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var n=this,t=n.movable,i=n.dimensions[e],s=n.tapCapture,o=new z({axis:e,movable:t,dimension:i,container:n.element}),l=new w({axis:e,movable:t,tapCapture:s,userEvents:n.userEvents,dimension:i,elastic:n.options.elastic,end:function(){o.hide()}});n[e+"inertia"]=l,n.pane[e].bind(C,function(){o.show()})}});s.plugin(O)})(window.kendo.jQuery)});