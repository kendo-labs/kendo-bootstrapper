("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.core.min","./kendo.data.min"],function(){(function(e,t){function n(e){var t,i,s=[];for(t=0,i=e.length;i>t;t++)s=e[t].hasSubgroups?s.concat(n(e[t].items)):s.concat(e[t].items);return s}function i(e,n,i){var s=i[e];return s?new m(w.initWidget(n,s.options,i)):t}function s(e){var t,n,i,a,r,h,o,d={};for(o=e.match(y),t=0,n=o.length;n>t;t++)i=o[t],a=i.indexOf(":"),r=i.substring(0,a),h=i.substring(a+1),"{"==h.charAt(0)&&(h=s(h)),d[r]=h;return d}function a(e,t,n){var i,s={};for(i in e)s[i]=new n(t,e[i]);return s}function r(e,t,n,h){var d,c,l,u=e.getAttribute("data-"+w.ns+"role"),v=e.getAttribute("data-"+w.ns+"bind"),m=e.children,y=[],x=!0,B={};if(h=h||[t],(u||v)&&o(e),u&&(l=i(u,e,n)),v&&(v=s(v.replace(_,"")),l||(B=w.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:I}),B.roles=n,l=new p(e,B)),l.source=t,c=a(v,h,g),B.template&&(c.template=new b(h,"",B.template)),c.click&&(v.events=v.events||{},v.events.click=v.click,delete c.click),c.source&&(x=!1),v.attr&&(c.attr=a(v.attr,h,g)),v.style&&(c.style=a(v.style,h,g)),v.events&&(c.events=a(v.events,h,f)),l.bind(c)),l&&(e.kendoBindingTarget=l),x&&m){for(d=0;m.length>d;d++)y[d]=m[d];for(d=0;y.length>d;d++)r(y[d],t,n,h)}}function h(t,n){var i,s,a=w.rolesFromNamespaces([].slice.call(arguments,2));for(n=w.observable(n),t=e(t),i=0,s=t.length;s>i;i++)r(t[i],n,a)}function o(t){var n=t.kendoBindingTarget;n&&(n.destroy(),e.support.deleteExpando?delete t.kendoBindingTarget:t.removeAttribute?t.removeAttribute("kendoBindingTarget"):t.kendoBindingTarget=null)}function d(e){var t,n,i=e.children;if(o(e),i)for(t=0,n=i.length;n>t;t++)d(i[t])}function c(t){var n,i;for(t=e(t),n=0,i=t.length;i>n;n++)d(t[n])}function l(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&h(n,i.source,t)}var u,g,f,b,v,p,m,y,_,w=window.kendo,x=w.Observable,B=w.data.ObservableObject,C=w.data.ObservableArray,k={}.toString,A={},F=w.Class,S=e.proxy,O="value",T="source",N="events",D="checked",I="change";(function(){var e=document.createElement("a");e.innerText!==t?u="innerText":e.textContent!==t&&(u="textContent")})(),g=x.extend({init:function(e,t){var n=this;x.fn.init.call(n),n.source=e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof x,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(I,n._change))},_parents:function(){var e,t=this.parents,n=this.get();return n&&(e=n.parent(),0>t.indexOf(e)&&(t=[e].concat(t))),t},change:function(e){var t,n,i=e.field,s=this;if("this"===s.path)s.trigger(I,e);else for(t in s.dependencies)if(0===t.indexOf(i)&&(n=t.charAt(i.length),!n||"."===n||"["===n)){s.trigger(I,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,n=e.source,i=0,s=e.path,a=n;if(!e.observable)return a;for(e.start(e.source),a=n.get(s);a===t&&n;)n=e.parents[++i],n instanceof B&&(a=n.get(s));return"function"==typeof a&&(i=s.lastIndexOf("."),i>0&&(n=n.get(s.substring(0,i))),e.start(n),a=a.call(n,e.source),e.stop(n)),n&&n!==e.source&&(e.currentSource=n,n.unbind(I,e._change).bind(I,e._change)),e.stop(e.source),a},set:function(e){var t=this,n=t.currentSource||t.source;n.set(t.path,e)},destroy:function(){this.observable&&this.source.unbind(I,this._change)}}),f=g.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)t=this.parents[++i],t instanceof B&&(e=t.get(n));return S(e,t)}}),b=g.extend({init:function(e,t,n){var i=this;g.fn.init.call(i,e,t),i.template=n},render:function(e){var t;return this.start(this.source),t=w.render(this.template,e),this.stop(this.source),t}}),v=F.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;e=t?e[t]:e,e.bind(I,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),A.attr=v.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),A.style=v.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),A.enabled=v.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),A.readonly=v.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),A.disabled=v.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),A.events=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=e(this.element),i=this.bindings.events[t],s=this.handlers[t];s&&n.off(t,s),s=this.handlers[t]=i.get(),n.on(t,i.source,s)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.off(t,this.handlers[t])}}),A.text=v.extend({refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.element[u]=e}}),A.visible=v.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),A.invisible=v.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),A.html=v.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),A.value=v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=S(this.change,this),this.eventName=i.valueUpdate||I,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=I,this.bindings[O].set(this.element.value),this._initChange=!1},refresh:function(){if(!this._initChange){var e=this.bindings[O].get();null==e&&(e=""),this.element.value=e}this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),A.source=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n)},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof C?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?w.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=w.template(t)),t},destroy:function(){var e=this.bindings.source.get();e.unbind(I,this._change)},add:function(t,n){var i,s,a,h,o=this.container(),d=o.cloneNode(!1),c=o.children[t];if(e(d).html(w.render(this.template(),n)),d.children.length)for(i=this.bindings.source._parents(),s=0,a=n.length;a>s;s++)h=d.children[0],o.insertBefore(h,c||null),r(h,n[s],this.options.roles,[n[s]].concat(i))},remove:function(e,t){var n,i=this.container();for(n=0;t.length>n;n++)i.removeChild(i.children[e])},render:function(){var t,n,i,s,a=this.bindings.source.get(),h=this.container(),o=this.template();if(a instanceof C||"[object Array]"===k.call(a)||(a.parent&&(s=a.parent),a=new C([a]),a.parent&&(a.parent=s)),this.bindings.template){if(e(h).html(this.bindings.template.render(a)),h.children.length)for(t=this.bindings.source._parents(),n=0,i=a.length;i>n;n++)r(h.children[n],a[n],this.options.roles,[a[n]].concat(t))}else e(h).html(w.render(o,a))}}),A.input={checked:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=S(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n=this.element,i=this.value();"radio"==n.type?this.bindings[D].set(i):"checkbox"==n.type&&(e=this.bindings[D].get(),e instanceof C?(i=this.element.value,"on"!==i&&"off"!==i&&(t=e.indexOf(i),t>-1?e.splice(t,1):e.push(i))):this.bindings[D].set(i))},refresh:function(){var e=this.bindings[D].get(),t=e,n=this.element;"checkbox"==n.type?(t instanceof C&&(e=this.element.value,t.indexOf(e)>=0&&(e=!0)),n.checked=e===!0):"radio"==n.type&&null!=e&&n.value===""+e&&(n.checked=!0)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(I,this._change)}})},A.select={value:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=S(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n,i,s,a,r=[],h=this.element,o=this.options.valueField||this.options.textField;for(s=0,a=h.options.length;a>s;s++)t=h.options[s],t.selected&&(i=t.attributes.value,i=i&&i.specified?t.value:t.text,r.push(i));if(o)for(e=this.bindings.source.get(),n=0;r.length>n;n++)for(s=0,a=e.length;a>s;s++)if(e[s].get(o)==r[n]){r[n]=e[s];break}i=this.bindings[O].get(),i instanceof C?i.splice.apply(i,[0,i.length].concat(r)):i instanceof B||!o?this.bindings[O].set(r[0]):this.bindings[O].set(r[0].get(o))},refresh:function(){var e,t,n,i=this.element,s=i.options,a=this.bindings[O].get(),r=a,h=this.options.valueField||this.options.textField,o=!1;for(r instanceof C||(r=new C([a])),i.selectedIndex=-1,n=0;r.length>n;n++)for(a=r[n],h&&a instanceof B&&(a=a.get(h)),e=0;s.length>e;e++)t=s[e].value,""===t&&""!==a&&(t=s[e].text),t==a&&(s[e].selected=!0,o=!0)},destroy:function(){e(this.element).off(I,this._change)}})},A.widget={events:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=S(this.change,this),this.widget.bind(I,this._change)},change:function(){this.bindings[D].set(this.value())},refresh:function(){this.widget.check(this.bindings[D].get()===!0)},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(I,this._change)}}),visible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:v.extend({init:function(e,t,n){var i=this;v.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=S(i.dataBinding,i),i._dataBound=S(i.dataBound,i),i._itemChange=S(i.itemChange,i)},itemChange:function(e){r(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings.source._parents()))},dataBinding:function(){var e,t,n=this.widget,i=n.items();for(e=0,t=i.length;t>e;e++)d(i[e])},_ns:function(t){t=t||w.ui;var n=[w.ui,w.dataviz.ui,w.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),w.rolesFromNamespaces(n)},dataBound:function(e){var t,i,s,a=this.widget,h=a.items(),o=a.dataSource,d=o.view(),c=o.group()||[];if(h.length)for(c.length&&(d=n(d)),s=this.bindings.source._parents(),t=0,i=d.length;i>t;t++)r(h[t],d[t],this._ns(e.ns),[d[t]].concat(s))},refresh:function(e){var t,n=this,i=n.widget;e=e||{},e.action||(n.destroy(),i.bind("dataBinding",n._dataBinding),i.bind("dataBound",n._dataBound),i.bind("itemChange",n._itemChange),t=n.bindings.source.get(),i.dataSource instanceof w.data.DataSource&&i.dataSource!=t&&(t instanceof w.data.DataSource?i.setDataSource(t):t&&t._dataSource?i.setDataSource(t._dataSource):i.dataSource.data(t)))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}}),value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(I,this._change);var s=this.bindings.value.get();this._valueIsObservableObject=null==s||s instanceof B,this._valueIsObservableArray=s instanceof C,this._initChange=!1},change:function(){var e,t,n,i,s,a,r,h=this.widget.value(),o=this.options.dataValueField||this.options.dataTextField,d="[object Array]"===k.call(h),c=this._valueIsObservableObject,l=[];if(this._initChange=!0,o)if(this.bindings.source&&(r=this.bindings.source.get()),""===h&&c)h=null;else{for((!r||r instanceof w.data.DataSource)&&(r=this.widget.dataSource.view()),d&&(t=h.length,l=h.slice(0)),s=0,a=r.length;a>s;s++)if(n=r[s],i=n.get(o),d){for(e=0;t>e;e++)if(i==l[e]){l[e]=n;break}}else if(i==h){h=c?n:i;break}l[0]&&(h=this._valueIsObservableArray?l:c||!o?l[0]:l[0].get(o))}this.bindings.value.set(h),this._initChange=!1},refresh:function(){if(!this._initChange){var e,t=this.options.dataValueField||this.options.dataTextField,n=this.bindings.value.get(),i=0,s=[];if(t)if(n instanceof C){for(e=n.length;e>i;i++)s[i]=n[i].get(t);n=s}else n instanceof B&&(n=n.get(t));this.widget.value(n)}this._initChange=!1},destroy:function(){this.widget.unbind(I,this._change)}}),multiselect:{value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(I,this._change),this._initChange=!1},change:function(){this._initChange=!0,this.bindings.value.set(this.widget.dataItems()),this._initChange=!1},refresh:function(){if(!this._initChange){var e,t=this.options.dataValueField||this.options.dataTextField,n=this.bindings.value.get(),i=0,s=[];if(t)if(n instanceof C){for(e=n.length;e>i;i++)s[i]=n[i].get(t);n=s}else n instanceof B&&(n=n.get(t));this.widget.value(n)}this._initChange=!1},destroy:function(){this.widget.unbind(I,this._change)}})}},p=F.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,s,a=this.target.nodeName.toLowerCase(),r=A[a]||{};for(t in e)t==O?n=!0:t==T?i=!0:t==N?s=!0:this.applyBinding(t,e,r);i&&this.applyBinding(T,e,r),n&&this.applyBinding(O,e,r),s&&this.applyBinding(N,e,r)},applyBinding:function(e,t,n){var i,s=n[e]||A[e],a=this.toDestroy,r=t[e];if(s)if(s=new s(this.target,t,this.options),a.push(s),r instanceof g)s.bind(r),a.push(r);else for(i in r)s.bind(r,i),a.push(r[i]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}}),m=p.extend({bind:function(e){var t,n=this,i=!1,s=!1,a=A.widget[n.target.options.name.toLowerCase()]||{};for(t in e)t==O?i=!0:t==T?s=!0:n.applyBinding(t,e);s&&n.applyBinding(T,e),i&&n.applyBinding(O,e,a[O])},applyBinding:function(e,t,n){var i,s=n||A.widget[e],a=this.toDestroy,r=t[e];if(!s)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(s=new s(this.target,t,this.target.options),a.push(s),r instanceof g)s.bind(r),a.push(r);else for(i in r)s.bind(r,i),a.push(r[i])}}),y=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,_=/\s/g,w.unbind=c,w.bind=h,w.data.binders=A,w.data.Binder=v,w.notify=l,w.observable=function(e){return e instanceof B||(e=new B(e)),e},w.observableHierarchy=function(e){function t(e){var n,i;for(n=0;e.length>n;n++)e[n]._initChildren(),i=e[n].children,i.fetch(),e[n].items=i.data(),t(e[n].items)}var n=w.data.HierarchicalDataSource.create(e);return n.fetch(),t(n.data()),n._data._dataSource=n,n._data}})(window.kendo.jQuery)});