("function"==typeof define&&define.amd?define:function(e,n){return n()})(["./kendo.mobile.pane.min","./kendo.router.min"],function(){(function(e,n){function i(e){var n=[];return n.push("km-"+e.name),m&&n.push("km-on-"+m.name),n.push("km-"+e.name+e.majorVersion),n.push("km-"+e.majorVersion),n.push("km-m"+(e.minorVersion?e.minorVersion[0]:0)),e.appMode?n.push("km-app"):n.push("km-web"),n.join(" ")}function t(e){return m.wp?"-kendo-landscape"==e.css("animation-name"):1==Math.abs(window.orientation)/90}function o(e){return t(e)?h:u}function a(){e("meta[name=viewport]").remove(),y.append(b({height:t()?", height="+window.innerHeight+"px":d.mobileOS.flatVersion>=600&&700>d.mobileOS.flatVersion?", height="+window.innerWidth+"px":", height=device-height"}))}var r=window.kendo,s=r.mobile,d=r.support,l=s.ui.Pane,p="ios",m=d.mobileOS,c="blackberry"==m.device&&m.flatVersion>=600&&1e3>m.flatVersion&&m.appMode,u="km-vertical",h="km-horizontal",f={ios:{ios:!0,appMode:!1,browser:"default",device:"iphone",flatVersion:"500",majorVersion:"5",minorVersion:"0.0",name:"ios",tablet:!1},android:{android:!0,appMode:!1,browser:"default",device:"android",flatVersion:"233",majorVersion:"2",minorVersion:"3.3",name:"android",tablet:!1},blackberry:{blackberry:!0,appMode:!1,browser:"default",device:"blackberry",flatVersion:"710",majorVersion:"7",minorVersion:"1.0",name:"blackberry",tablet:!1},meego:{meego:!0,appMode:!1,browser:"default",device:"meego",flatVersion:"850",majorVersion:"8",minorVersion:"5.0",name:"meego",tablet:!1},wp:{wp:!0,appMode:!1,browser:"default",device:"wp",flatVersion:"800",majorVersion:"8",minorVersion:"0.0",name:"wp",tablet:!1}},b=r.template('<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no#=data.height#" name="viewport" />',{usedWithBlock:!1}),v='<meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-status-bar-style" content="black" /> ',w=b({height:""}),g=r.template('<link rel="apple-touch-icon'+(m.android?"-precomposed":"")+'" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />',{usedWithBlock:!1}),k=("iphone"==m.device||"ipod"==m.device)&&"mobilesafari"==m.browser,V=60,_=e(window),y=e("head"),C=e.proxy,M=r.Observable.extend({init:function(n,i){var t=this;s.application=t,t.options=e.extend({hideAddressBar:!0,transition:"",updateDocumentTitle:!0},i),r.Observable.fn.init.call(t,t.options),e(function(){t.element=e(n?n:document.body),t._setupPlatform(),t._setupElementClass(),t._attachHideBarHandlers(),t.pane=new l(t.element,t.options),t._attachMeta(),t.options.updateDocumentTitle&&t._setupDocumentTitle(),t._startHistory(),d.kineticScrollNeeded&&e(document.documentElement).on("touchmove",function(n){e(n.target).is("textarea")||r.preventDefault(n)})})},navigate:function(e,n){this.pane.navigate(e,n)},scroller:function(){return this.view().scroller},hideLoading:function(){this.pane.hideLoading()},showLoading:function(){this.pane.showLoading()},view:function(){return this.pane.view()},_setupPlatform:function(){var n,t=this,o=t.options.platform,a=m||f[p];o&&(a="string"==typeof o?f[o]:o),t.os=a,t.osCssClass=i(t.os),"wp"==a.name&&(n=C(t._setupWP8Theme,t),e(window).on("focusin",n),document.addEventListener("resume",n),t._setupWP8Theme())},_setupWP8Theme:function(){var n,i=this,t=e(i.element);i._bgColorDiv||(i._bgColorDiv=e("<div />").css({background:"Background",visibility:"hidden",position:"absolute",top:"-3333px"}).appendTo(document.body)),n=parseInt(i._bgColorDiv.css("background-color").split(",")[1],10),t.removeClass("km-wp-dark km-wp-light"),0===n?t.addClass("km-wp-dark"):t.addClass("km-wp-light"),t.parent().css("overflow","hidden")},_startHistory:function(){var e=this,n=e.options.initial,i=new r.Router({init:function(t){var o=t.url;"/"===o&&n&&(i.navigate(n,!0),e.pane.navigate(n),t.preventDefault())},routeMissing:function(n){e.pane.navigate(n.url)}});e.pane.bind("navigate",function(e){i.navigate(e.url,!0)}),i.start(),e.router=i},_setupElementClass:function(){var e=this,n=e.element;n.parent().addClass("km-root km-"+(e.os.tablet?"tablet":"phone")),n.addClass(e.osCssClass+" "+o(n)),c&&a(),r.onResize(function(){n.removeClass("km-horizontal km-vertical").addClass(o(n)),c&&a()})},_attachMeta:function(){var e,n=this.options.icon;if(c||y.prepend(w),y.prepend(v),n){"string"==typeof n&&(n={"":n});for(e in n)y.prepend(g({icon:n[e],size:e}))}},_attachHideBarHandlers:function(){var e=this,n=C(e._hideBar,e);!d.mobileOS.appMode&&e.options.hideAddressBar&&(e._initialHeight={},k&&(_.on("load",n),r.onResize(n),e.element[0].addEventListener("touchstart",n,!0)))},_setupDocumentTitle:function(){var e=this,i=document.title;e.pane.bind("viewShow",function(e){var t=e.view.title;document.title=t!==n?t:i})},_hideBar:function(){var e,n=this,i=n.element,t=window.orientation+"",o=n._initialHeight;o[t]||(o[t]=_.height()),e=o[t]+V,e!=i.height()&&i.height(e),setTimeout(window.scrollTo,0,0,1)}});r.mobile.Application=M})(window.kendo.jQuery)});