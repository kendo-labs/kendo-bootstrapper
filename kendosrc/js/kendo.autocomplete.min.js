("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.list.min"],function(){(function(e,t){function s(e,t,s){return s?t.substring(0,e).split(s).length-1:0}function a(e,t,a){return t.split(a)[s(e,t,a)]}function n(e,t,a,n){var r=t.split(n);return r.splice(s(e,t,n),1,a),n&&""!==r[r.length-1]&&r.push(""),r.join(n)}function r(e){var t=e.value.length;k(e,t,t)}var o=window.kendo,i=o.support,l=i.placeholder,c=o.ui,u=o.keys,p=o.data.DataSource,d=c.List,h="aria-disabled",_="k-state-default",f="disabled",g="k-state-focused",v="k-state-selected",m="k-state-disabled",y="k-state-hover",C=".kendoAutoComplete",b="mouseenter"+C+" mouseleave"+C,w=d.caret,k=d.selectText,x=e.proxy,S=d.extend({init:function(t,s){var a,n=this;n.ns=C,s=e.isArray(s)?{dataSource:s}:s,d.fn.init.call(n,t,s),t=n.element,s=n.options,s.placeholder=s.placeholder||t.attr("placeholder"),l&&t.attr("placeholder",s.placeholder),n._wrapper(),n._loader(),n._accessors(),n._dataSource(),n._ignoreCase(),t[0].type="text",a=n.wrapper,n._popup(),t.addClass("k-input").on("keydown"+C,x(n._keydown,n)).on("paste"+C,x(n._search,n)).on("focus"+C,function(){n._prev=n._accessor(),n._placeholder(!1),a.addClass(g)}).on("blur"+C,function(){n._change(),n._placeholder(),a.removeClass(g)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),n._enable(),n._popup(),n._old=n._accessor(),t[0].id&&t.attr("aria-owns",n.ul[0].id),n._aria(),n._placeholder(),o.notify(n)},options:{name:"AutoComplete",enable:!0,suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{}},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=x(e.refresh,e),e._progressHandler=x(e._showBusy,e)),e.dataSource=p.create(e.options.dataSource).bind("change",e._refreshHandler).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","dataBinding","dataBound"],setOptions:function(e){d.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},enable:function(e){var t=this,s=t.element,a=t.wrapper.off(b);e===!1?(a.removeClass(_).addClass(m),s.attr(f,f).attr(h,!0)):(a.removeClass(m).addClass(_).on(b,t._toggleHover),s.removeAttr(f).attr(h,!1))},close:function(){var e=this,t=e._current;t&&t.removeClass(v),e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(C),e.wrapper.off(C),d.fn.destroy.call(e)},refresh:function(){var s,a=this,n=a.ul[0],r=a.popup,i=a.options,l=a._data(),c=l.length;a.trigger("dataBinding"),n.innerHTML=o.render(a.template,l),a._height(c),r.visible()&&r._position(),c&&(i.highlightFirst&&a.current(e(n.firstChild)),i.suggest&&a.suggest(e(n.firstChild))),a._open&&(a._open=!1,s=c?"open":"close",a._typing&&a.element[0]!==document.activeElement&&(s="close"),r[s](),a._typing=t),a._touchScroller&&a._touchScroller.reset(),a._makeUnselectable(),a._hideBusy(),a.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t,s=this,n=s.options,r=n.ignoreCase,o=n.separator;e=e||s._accessor(),s._current=null,clearTimeout(s._typing),o&&(e=a(w(s.element[0]),e,o)),t=e.length,t?t>=s.options.minLength&&(s._open=!0,s.dataSource.filter({value:r?e.toLowerCase():e,operator:n.filter,field:n.dataTextField,ignoreCase:r})):s.popup.close()},suggest:function(e){var a,n=this,r=n._last,o=n._accessor(),i=n.element[0],l=w(i),c=n.options.separator,p=o.split(c),h=s(l,o,c),_=l;return r==u.BACKSPACE||r==u.DELETE?(n._last=t,t):(e=e||"","string"!=typeof e&&(a=d.inArray(e[0],n.ul[0]),e=a>-1?n._text(n._data()[a]):""),0>=l&&(l=o.toLowerCase().indexOf(e.toLowerCase())+1),a=o.substring(0,l).lastIndexOf(c),a=a>-1?l-(a+c.length):l,o=p[h].substring(0,a),e&&(a=e.toLowerCase().indexOf(o.toLowerCase()),a>-1&&(e=e.substring(a+o.length),_=l+e.length,o+=e),c&&""!==p[p.length-1]&&p.push("")),p[h]=o,n._accessor(p.join(c||"")),k(i,l,_),t)},value:function(e){return e===t?this._accessor():(this._accessor(e),this._old=e,t)},_accessor:function(e){var s=this,a=s.element[0];return e===t?(e=a.value,a.className.indexOf("k-readonly")>-1?e===s.options.placeholder?"":e:e):(a.value=null===e?"":e,s._placeholder(),t)},_accept:function(e){var t=this;t._focus(e),r(t.element[0])},_keydown:function(t){var s=this,a=s.ul[0],n=t.keyCode,r=s._current,o=s.popup.visible();s._last=n,n===u.DOWN?(o&&s._move(r?r.next():e(a.firstChild)),t.preventDefault()):n===u.UP?(o&&s._move(r?r.prev():e(a.lastChild)),t.preventDefault()):n===u.ENTER||n===u.TAB?(n===u.ENTER&&s.popup.visible()&&t.preventDefault(),s._accept(r)):n===u.ESC?(s.popup.visible()&&t.preventDefault(),s.close()):s._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!l){var s,a=this,n=a.element,r=a.options.placeholder;if(r){if(s=n.val(),e===t&&(e=!s),e||(r=s!==r?s:""),s===a._old&&!e)return;n.toggleClass("k-readonly",e).val(r)}}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var s,a,r=this,o=r.options.separator,i=r._data();t=e(t),t[0]&&!t.hasClass(v)&&(a=d.inArray(t[0],r.ul[0]),a>-1&&(i=i[a],s=r._text(i),o&&(s=n(w(r.element[0]),r._accessor(),s,o)),r._accessor(s),r.current(t.addClass(v))))},_loader:function(){this._loading=e('<span class="k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass(y,"mouseenter"===t.type)},_wrapper:function(){var e,t=this,s=t.element,a=s[0];e=s.parent(),e.is("span.k-widget")||(e=s.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=a.style.cssText,s.css({width:"100%",height:a.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(a.className)}});c.plugin(S)})(window.kendo.jQuery)});